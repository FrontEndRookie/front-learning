# 原生文件拖放

所谓原生文件拖放（Native File Drag and Drop）是指**<u>操作系统级别</u>**支持的一种用户界面交互模式，允许用户通过鼠标或其他指针设备，将文件从一个位置拖动并释放（或“放置”）到另一个位置。

ev.sender.startDrag 方法是 Electron 中用于启动原生拖拽操作的API。这个方法属于 WebContents 类，通常在 Electron 的主进程中使用，用于响应渲染进程的请求来开始一个拖拽操作。它允许应用程序指定拖拽过程中的文件和可选的自定义图标。



## startDrag基本用法

startDrag 方法接受一个对象参数，该对象包含拖拽操作的相关信息。最基本的属性包括：

- file：要拖动的文件的路径。这是一个必须提供的属性。
- icon：拖拽操作中显示的图标的路径。这是一个可选属性，用于自定义拖拽时的图标。

下面是一个简单的示例：

```js
ipcMain.on('ondragstart', (event, filePath) => {
  event.sender.startDrag({
    file: filePath,
    icon: path.join(__dirname, 'path/to/icon.png')
  });
});
```



## 没有拖拽完成的回调

关于拖拽操作的完成，startDrag 方法本身并不提供直接的回调或事件来通知拖拽完成。

这是**<u>因为拖拽操作是与操作系统交互的</u>**，操作的结果（如用户将文件拖拽到哪里）并不反馈给 Electron 应用程序。

虽然没有直接的回调，但你可以通过其他机制来监听或处理拖拽完成后的情况：

- 监听目标位置的事件：如果拖拽的目标是应用程序内部的某个部分，你可以在那个部分监听 drop 事件来响应文件被拖拽到那里。
- 利用操作系统级别的通知：如果拖拽操作涉及到应用程序外部，比如拖拽文件到桌面或其他应用，通常没有办法直接从 Electron 获取操作完成的通知。在这种情况下，应用程序需要根据具体的使用场景来设计反馈机制。例如使用 Electron 的 Notification API 来发送桌面通知。
