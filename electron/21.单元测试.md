# 单元测试

测试的种类：

- 静态测试
- 单元测试
- 集成测试
- E2E测试



**静态测试**

静态测试不会涉及到运行代码，而是在编写代码期间对代码进行检查和分析，捕获写代码时的错别字和类型错误。

对于前端开发人员来讲，静态测试更倾向于使用 *TypeScript* 以及 *ESLint* 等静态检查工具来找出代码问题。



**单元测试**

单元测试用于验证单独隔离的部分是否正常工作。它对软件中的最小可测试单元进行测试，通常是单个函数或方法。

单元测试的目的是确保每个单元在独立运行时都能正常工作。单元测试通常由开发人员编写，可以使用各种自动化测试工具进行。



**集成测试**

所谓集成测试，就是将多个单元组装在一起进行测试，集成测试可以帮助检测各个单元之间的接口问题，并且可以提前发现系统级别的问题。因此集成测试的目的是确保整个系统中的各个部分在连接起来的时候能够正常工作。

例如在前面的单元测试中，我们一般会尽可能的屏蔽连接数据库、发送网络请求等功能，这一块儿会使用 *mock* 的实现，但是到了集成测试的时候，就会连接真实的数据库、发送真实的网络请求，确保它们在协作时能够正常工作。



**E2E测试**

英语全称为 *End To End*，翻译成中文就是端到端测试。

这种测试会测试整个软件系统的完整性和功能性，包括用户界面、数据库、网络连接等各个方面。

一般来说，它会跑完整个应用（前端 + 后端），*E2E* 会利用一个很像用户行为的机器人来和你的应用进行交互，这样的测试就会像真实用户那样和应用进行交互。



**vitest配置**

```js
export default {
  test: {
    globals: true,
    environment: "jsdom",
  },
};
```

- test：对应的值为一个对象，包含了所有和测试相关的配置项目。
  - globals：会在全局作用域自动注入 Vitest 测试相关的函数，比如 describe、test、it、expect，这样的话我们就不需要在每个测试文件中单独导入这些方法了。
  - environment：我们设置的值为 jsdom，表示测试运行在一个模拟的浏览器环境中。我们安装了 jsdom 这个依赖，该依赖的作用是使用纯 JavaScript 来模拟浏览器浏览器环境，这样可以让我们在不启动浏览器的情况下，测试一些涉及 DOM 操作的代码。