(()=>{"use strict";function e(e,l,n,t,i){return{sel:e,data:l,children:n,text:t,elm:i,key:l.key}}function l(l,n,t){if("string"==typeof t)return e(l,n,void 0,t,void 0);if(Array.isArray(t)){let i=[];for(let e of t)i.push(e);return e(l,n,i,void 0,void 0)}}function n(e){let l=document.createElement(e.sel);if(null==e.children)l.innerText=e.text;else if(Array.isArray(e.children))for(let t of e.children){let e=n(t);l.appendChild(e)}return e.elm=l,l}function t(e,l){return e.key==l.key}function i(e,l){if(void 0===l.children)l.text!==e.text&&(e.elm.innerText=l.text);else if(void 0!==e.children&&e.children.length>0)((e,l,o)=>{let r=0,c=l.length-1,s=0,f=o.length-1,d=l[0],m=l[c],u=o[0],y=o[f];for(;r<=c&&s<=f;)if(console.log(d),null==d&&(d=l[++r]),null==m)m=l[--m];else if(t(d,u))console.log("1"),i(d,u),u&&(u.elm=d?.elm),d=l[++r],u=o[++s];else if(t(m,y))console.log("2"),i(m,y),y&&(y.elm=m?.elm),m=l[--c],y=o[--f];else if(t(d,y))console.log("3"),i(d,y),y&&(y.elm=d?.elm),e.insertBefore(d.elm,m.elm.nextSibling),d=l[++r],y=o[--f];else if(t(m,u))console.log("4"),i(m,u),u&&(u.elm=m?.elm),e.insertBefore(m.elm,d.elm),m=l[--c],u=o[++s];else{console.log("5");const t={};for(let e=r;e<=c;e++){const n=l[e]?.key;n&&(t[n]=e)}let f=t[u.key];if(f){const n=l[f];i(n,u),l[f]=void 0,e.insertBefore(n.elm,d.elm)}else e.insertBefore(n(u),d.elm);u=o[++s]}if(r>c){const l=o[f+1]?o[f+1].elm:null;for(let t=s;t<=f;t++)e.insertBefore(n(o[t]),l)}else for(let n=r;n<=c;n++)e.removeChild(l[n].elm)})(e.elm,e.children,l.children);else{e.elm.innerHTML="";for(let t of l.children){let l=n(t);e.elm.appendChild(l)}}}function o(l,t){if(null==l.sel&&(l=e(l.tagName.toLowerCase(),{},[],void 0,l)),l.sel===t.sel)i(l,t);else{let e=n(t),i=l.elm;e&&i.parentNode.insertBefore(e,i),i.parentNode.removeChild(i)}}let r=document.getElementById("container"),c=document.getElementById("btn"),s=l("ul",{},[l("li",{key:"a"},"a"),l("li",{key:"b"},"b"),l("li",{key:"c"},"c")]);o(r,s);let f=l("ul",{},[l("li",{key:"a"},"a"),l("li",{key:"b"},"b"),l("li",{key:"d"},"d"),l("li",{key:"c"},"c")]);c.onclick=function(){o(s,f)}})();